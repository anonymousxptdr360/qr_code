<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>G√©n√©rateur de QR Code Intelligent</title>

<script src="https://cdn.tailwindcss.com"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js" charset="UTF-8"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>

  body {

    font-family: "Inter", sans-serif;

    background-color: #f0f2f5;

    display: flex;

    justify-content: center;

    align-items: center;

    min-height: 100vh;

    margin: 0;

    padding: 20px;

    box-sizing: border-box;

  }

  .container {

    background-color: #ffffff;

    padding: 30px;

    border-radius: 12px;

    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);

    width: 100%;

    max-width: 500px;

    text-align: center;

  }

  #qrcode canvas, #qrcode img {

    border-radius: 8px;

    max-width: 100%;

    height: auto;

  }

  #fullscreenOverlay {

    display: none;

    position: fixed;

    top: 0;

    left: 0;

    width: 100vw;

    height: 100vh;

    background: black;

    justify-content: center;

    align-items: center;

    z-index: 9999;

  }

  #fullscreenOverlay img {

    width: 100vw;

    height: 100vh;

    object-fit: contain;

  }

</style>



<div class="container">

  <h1 class="text-3xl font-bold text-gray-800 mb-6">G√©n√©rateur de QR Code</h1>

  <p class="text-gray-600 mb-6">Tapez du texte ou une URL ci-dessous pour g√©n√©rer un QR Code adapt√©.</p>

  <textarea id="textInput" placeholder="Entrez votre texte ici..." class="w-full p-3 border rounded mb-6" rows="5"></textarea>

  <button id="resetBtn" class="bg-red-500 text-white px-4 py-2 rounded mb-6">üîÑ R√©initialiser</button>

  <div id="qrcode" class="flex flex-col justify-center items-center p-4 bg-gray-100 rounded mb-6 min-h-[100px]">

    <p class="text-gray-400">Votre QR Code appara√Ætra ici</p>

  </div>

  <button id="expandBtn" class="hidden bg-gray-800 text-white px-4 py-2 rounded mb-4">üîç Plein √©cran</button>

  <div class="download-buttons flex flex-wrap justify-center gap-4">

    <button id="downloadPng" class="bg-indigo-600 text-white px-4 py-2 rounded">T√©l√©charger PNG</button>

    <button id="downloadJpeg" class="bg-indigo-600 text-white px-4 py-2 rounded">T√©l√©charger JPEG</button>

    <button id="downloadPdf" class="bg-indigo-600 text-white px-4 py-2 rounded">T√©l√©charger PDF</button>

  </div>

  <div id="messageBox" class="message-box mt-4 text-sm hidden"></div>

</div>



<div id="fullscreenOverlay" class="flex">

  <img id="fullscreenImage" src="" alt="QR Code plein √©cran" loading="lazy">

</div>



<script>

  document.addEventListener('DOMContentLoaded', () => {

    const textInput = document.getElementById('textInput');

    const qrcodeDiv = document.getElementById('qrcode');

    const messageBox = document.getElementById('messageBox');

    const downloadPngBtn = document.getElementById('downloadPng');

    const downloadJpegBtn = document.getElementById('downloadJpeg');

    const downloadPdfBtn = document.getElementById('downloadPdf');

    const expandBtn = document.getElementById('expandBtn');

    const fullscreenOverlay = document.getElementById('fullscreenOverlay');

    const fullscreenImage = document.getElementById('fullscreenImage');

    const resetBtn = document.getElementById('resetBtn');



    function showMessage(message, type = 'info') {

      messageBox.textContent = message;

      messageBox.className = `message-box ${type === 'error' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'} p-2 rounded`;

      messageBox.style.display = 'block';

      setTimeout(() => { messageBox.style.display = 'none'; }, 4000);

    }



    function generateQrCode() {

      const text = unescape(encodeURIComponent(textInput.value.trim()));

      qrcodeDiv.innerHTML = '';

      expandBtn.classList.add('hidden');



      if (!text) {

        qrcodeDiv.innerHTML = '<p class="text-gray-400">Votre QR Code appara√Ætra ici</p>';

        return;

      }



      try {

        const qr = qrcode(0, 'L');

        qr.addData(text);

        qr.make();

        const qrImg = qr.createImgTag(6, 8);

        qrcodeDiv.innerHTML = qrImg;

        expandBtn.classList.remove('hidden');

      } catch (err) {

        showMessage("Erreur lors de la g√©n√©ration du QR Code.", 'error');

        console.error(err);

      }

    }



    resetBtn.addEventListener('click', () => {

      textInput.value = '';

      qrcodeDiv.innerHTML = '<p class="text-gray-400">Votre QR Code appara√Ætra ici</p>';

      expandBtn.classList.add('hidden');

      showMessage('Texte r√©initialis√© !');

    });



    expandBtn.addEventListener('click', () => {

      const img = qrcodeDiv.querySelector('img');

      if (!img) return;

      fullscreenImage.src = img.src;

      fullscreenOverlay.style.display = 'flex';

    });



    fullscreenOverlay.addEventListener('click', () => {

      fullscreenOverlay.style.display = 'none';

      fullscreenImage.src = '';

    });



    textInput.addEventListener('input', generateQrCode);

    textInput.addEventListener('paste', () => setTimeout(generateQrCode, 100));



    function getCanvasImage(callback) {

      const img = qrcodeDiv.querySelector('img');

      if (!img) return callback(null);

      const canvas = document.createElement('canvas');

      const ctx = canvas.getContext('2d');

      canvas.width = img.naturalWidth;

      canvas.height = img.naturalHeight;

      img.onload = () => {

        ctx.drawImage(img, 0, 0);

        callback(canvas);

      };

      if (img.complete) {

        ctx.drawImage(img, 0, 0);

        callback(canvas);

      }

    }



    downloadPngBtn.addEventListener('click', () => {

      getCanvasImage((canvas) => {

        if (!canvas) return showMessage('QR Code introuvable.', 'error');

        const link = document.createElement('a');

        link.href = canvas.toDataURL('image/png');

        link.download = 'qrcode.png';

        link.click();

        showMessage('QR Code t√©l√©charg√© en PNG !');

      });

    });



    downloadJpegBtn.addEventListener('click', () => {

      getCanvasImage((canvas) => {

        if (!canvas) return showMessage('QR Code introuvable.', 'error');

        const link = document.createElement('a');

        link.href = canvas.toDataURL('image/jpeg');

        link.download = 'qrcode.jpeg';

        link.click();

        showMessage('QR Code t√©l√©charg√© en JPEG !');

      });

    });



    downloadPdfBtn.addEventListener('click', () => {

      getCanvasImage((canvas) => {

        if (!canvas) return showMessage('QR Code introuvable.', 'error');

        const { jsPDF } = window.jspdf;

        const pdf = new jsPDF();

        const imgData = canvas.toDataURL('image/png');

        pdf.addImage(imgData, 'PNG', 10, 10, 50, 50);

        pdf.save('qrcode.pdf');

        showMessage('QR Code t√©l√©charg√© en PDF !');

      });

    });

  });

</script>
